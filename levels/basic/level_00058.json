{
  "levelId": "level_00058",
  "levelName": "Nível 62 - Detector de Sequência '101'",
  "levelDescription": "A saída Z deve ser 'true' somente quando a entrada D completar a sequência '101' nos últimos três ciclos do 'Step' (clock).",
  "grid": {
    "rows": 13,
    "cols": 8
  },
  "nodes": [
    { "id": "input_D", "type": "Input", "label": "D", "row": 1, "col": 1 },
    { "id": "input_Step", "type": "Input", "label": "Step", "row": 1, "col": 4 },
    
    { "id": "q1", "type": "NAND", "label": "Q1", "row": 9, "col": 1 },
    { "id": "nq1", "type": "NAND", "label": "nQ1", "row": 9, "col": 2 },
    { "id": "ff1_s", "type": "NAND", "label": "NAND", "row": 8, "col": 1 },
    { "id": "ff1_r", "type": "NAND", "label": "NAND", "row": 8, "col": 2 },
    { "id": "ff1_d_not", "type": "NOT", "label": "NOT", "row": 7, "col": 2 },
    { "id": "d1_logic", "type": "AND", "label": "D1", "row": 6, "col": 2 },
    
    { "id": "q0", "type": "NAND", "label": "Q0", "row": 9, "col": 6 },
    { "id": "nq0", "type": "NAND", "label": "nQ0", "row": 9, "col": 7 },
    { "id": "ff0_s", "type": "NAND", "label": "NAND", "row": 8, "col": 6 },
    { "id": "ff0_r", "type": "NAND", "label": "NAND", "row": 8, "col": 7 },
    { "id": "ff0_d_not", "type": "NOT", "label": "NOT", "row": 7, "col": 7 },
    { "id": "d0_logic", "type": "AND", "label": "D0", "row": 6, "col": 7 },
    
    { "id": "d1_p1", "type": "AND", "label": "AND", "row": 5, "col": 1 }, { "id": "d1_p2", "type": "NOT", "label": "NOT", "row": 5, "col": 2 },
    { "id": "d0_p1", "type": "AND", "label": "AND", "row": 5, "col": 6 }, { "id": "d0_p2", "type": "NOT", "label": "NOT", "row": 5, "col": 7 },
    
    { "id": "z_logic", "type": "AND", "label": "AND", "row": 11, "col": 4 },
    { "id": "z_p1", "type": "AND", "label": "AND", "row": 10, "col": 4 },
    { "id": "output_Z", "type": "Output", "label": "Z", "row": 12, "col": 4 }
  ],
  "connections": [
    { "from": "d1_logic", "to": "ff1_d_not" }, { "from": "d1_logic", "to": "ff1_s" }, { "from": "ff1_d_not", "to": "ff1_r" },
    { "from": "input_Step", "to": "ff1_s" }, { "from": "input_Step", "to": "ff1_r" },
    { "from": "ff1_s", "to": "q1" }, { "from": "nq1", "to": "q1" },
    { "from": "ff1_r", "to": "nq1" }, { "from": "q1", "to": "nq1" },
    
    { "from": "d0_logic", "to": "ff0_d_not" }, { "from": "d0_logic", "to": "ff0_s" }, { "from": "ff0_d_not", "to": "ff0_r" },
    { "from": "input_Step", "to": "ff0_s" }, { "from": "input_Step", "to": "ff0_r" },
    { "from": "ff0_s", "to": "q0" }, { "from": "nq0", "to": "q0" },
    { "from": "ff0_r", "to": "nq0" }, { "from": "q0", "to": "nq0" },
    
    { "from": "nq1", "to": "d1_p1" }, { "from": "q0", "to": "d1_p1" },
    { "from": "input_D", "to": "d1_p2" }, { "from": "d1_p1", "to": "d1_logic" }, { "from": "d1_p2", "to": "d1_logic" },
    
    { "from": "q1", "to": "d0_p1" }, { "from": "q0", "to": "d0_p1" },
    { "from": "d0_p1", "to": "d0_p2" }, { "from": "input_D", "to": "d0_logic" }, { "from": "d0_p2", "to": "d0_logic" },
    
    { "from": "q1", "to": "z_p1" }, { "from": "nq0", "to": "z_p1" },
    { "from": "z_p1", "to": "z_logic" }, { "from": "input_D", "to": "z_logic" },
    { "from": "z_logic", "to": "output_Z" }
  ],
  "initialInputs": { "input_D": false, "input_Step": false },
  "targetOutputs": { "output_Z": true },
  "pop_up": { "text": "Construa a máquina de estados para detectar '101'. Passo-a-passo: 1) D=1, pulse Step. 2) D=0, pulse Step. 3) D=1, a saída Z deve acender." }
}